{% extends 'questionic/layout.html' %}
{% block body %}

<div class="row g-0">
    <div class="col-3"></div>
    <div class="col-6">
        <h1>question</h1>

        <h4>หัวข้อ: {{question.title}}<h4>
        <h4>รายละเอียด: {{question.detail}}<h4>
        <h4>หมวดหมู่: {{question.category}}<h4>
        <h4>ระดับ: {{question.grade}}<h4>
        <h4>เวลาโพสต์: {{question.date_asked}}<h4>
        <h4>ผู้โพสต์: {{question.asker}}<h4>

        {%if list_images%}
            <h4>รูปภาพ: <h4>        
        {%endif%}

        {%for img in list_images %}
            <img src='{{img.image.url}}' width="100" height="150">
        {%endfor%}
        <br><br><br><br>
        <h4>ความคิดเห็น<h4>
        <br><br><br><br>

        <form action="{% url 'questionic:question' question.id %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <label for="Detail">เขียนความคิดเห็น :
            <input type="text" name="Detail" value="{{Detail}}" required>
            
            <input type="file" name="images" value="{{images}}"  accept="image/png, image/jpeg" multiple>
            <button type="submit" name="comment" value="{{question.id}}">ส่งความคิดเห็น</button>
        </form>
        <br><br><br>
        {%for answer, image_answer in dict_answer_image.items %}
            <h5>ความคิดเห็นของ {{answer.answerer}} : <h5>
            <h5>รายละเอียด: {{answer.detail}}<h5>
            <h5>เวลาตอบ: {{answer.date_answered}}<h5>
            
            {%for image in image_answer%}
                <img src='{{image.image.url}}' width="100" height="150">
            {%endfor%}
            <form action="{% url 'questionic:question' question.id %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <label for="Detail">เขียนตอบกลับ :
                <input type="text" name="Detail" value="{{Detail}}" required>
                <input type="file" name="images" value="{{images}}"  accept="image/png, image/jpeg" multiple>
                <button type="submit" name="reply" value="{{answer.id}}">ส่งตอบกลับ</button>
            </form>
            {%for ans, reply_answer_image in dict_reply_image.items %}
                {%if answer.id is ans.id %}
                    {%for reply, image_reply in reply_answer_image.items %}
                        <h6>---------------การตอบกลับของความคิดเห็นของ {{ans.answerer}} <h6>
                        <h6>---------------การตอบกลับของ {{reply.reply_answerer}} <h6>
                        <h6>---------------รายละเอียดของการตอบกลับ: {{reply.detail}}<h6>
                        <h6>---------------เวลาตอบกลับ: {{reply.date_reply_answered}}<h6>
                        {%for image in image_reply%}
                            <img src='{{image.image.url}}' width="50" height="75">
                        {%endfor%}

                    {%endfor%}
                {%endif%}
            {%endfor%}
        {%endfor%}



    </div>
    <div class="col-3"></div>
</div>





{% endblock %}